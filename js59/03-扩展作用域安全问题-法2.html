<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        var name = "作用域安全问题";//全局变量
        //构造函数
        function Person(name, age) {
            //法2-在ES6或在严格模式下this都不是指向window
            if (!(this instanceof Person)) {
                //this instanceof Person-当前对象在构造函数身上(即找父类)
                //!(this instanceof Person)-当前对象不在构造函数身上(即无new关键字)

                // throw "请仔细检查下面的代码有无写new关键字，若忘记写，请及时、修改";//手动抛出异常
                return new Person();//手动返回-保证代码安全性
            } else {
                this.name = name;
                this.age = age;
            }
        }
        //实例化对象
        var per1 = new Person("zs", 18);
        console.log(per1);

        //面试
        var per2 = Person("ls", 19);//在工作中忘加new关键字-结果为undefined
        console.log(per2);
        console.log(name);//修改的是全局变量
    </script>
</body>

</html>